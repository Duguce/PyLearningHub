# Python高级学习笔记

Abstract：本文主要记录了作者在日常学习Python过程中所掌握的一些高级功能特性，例如正则表达式、装饰器等内容，并对其进行了总结和归纳。

Author： Duguce

Email：zhgyqc@163.com

Datetime:  2022-03-21 20:40 —— 2022-03-21 20:40

## 1 正则表达式

> 正则表达式是一种用于匹配、搜索、替换文本的工具。正则表达式通常由一些特殊字符和常规字符组成，可以用来表示文本模式。

正则表达式通常用于文本处理任务，如搜索、替换、解析和验证文本。它们可以被用于各种编程语言和工具中，如Perl、Python、Java、JavaScript、sed、grep、awk等等。

正则表达式可以用于：

- 匹配一个文本模式，如匹配一个特定的字符串。
- 匹配一组字符串，如匹配所有以特定字符串开头的字符串。
- 匹配一些字符集合，如匹配所有数字或所有字母。
- 替换文本中的一个模式，如将所有特定字符串替换为另一个字符串。
- 分割文本，如将一个长字符串分割成一组短字符串。
- 验证文本，如检查一个字符串是否符合特定的格式要求。

### 1.1 re模块简介

在 Python 中，可以使用内置模块 `re` 来进行正则表达式的操作。

常用的函数有：

- `re.search(pattern, string)`：在字符串 `string` 中搜索匹配正则表达式 `pattern` 的第一个位置，并返回一个包含匹配信息的 `Match` 对象，如果匹配不成功，则返回 `None`。
- `re.match(pattern, string)`：从字符串 `string` 的起始位置开始匹配正则表达式 `pattern`，如果匹配成功，则返回一个包含匹配信息的 `Match` 对象，否则返回 `None`。
- `re.findall(pattern, string)`：搜索字符串 `string` 中所有匹配正则表达式 `pattern` 的子串，并返回一个列表，如果没有匹配成功，则返回空列表。
- `re.sub(pattern, repl, string)`：在字符串 `string` 中搜索匹配正则表达式 `pattern` 的所有子串，并用 `repl` 替换掉，返回替换后的字符串。
- `re.search(pattern, string, flags=0)`：`search`函数会在字符串 `string` 中从左到右搜索，找到第一个与正则表达式匹配的位置。如果在字符串中找不到匹配项，则返回`None`。

### 1.2 匹配单个字符

| 字符 |                功能                |
| :--: | :--------------------------------: |
| `.`  |    匹配除了换行符以外的任意字符    |
| `[]` |         匹配[]中列举的字符         |
| `\w` |       匹配字母、数字、下划线       |
| `\d` |              匹配数字              |
| `\s` | 匹配空格、制表符、换行符等空白字符 |
| `\W` |   匹配非字母、数字、下划线的字符   |
| `\D` |          匹配非数字的字符          |
| `\S` |           匹配非空白字符           |

### 1.3 匹配多个字符

|  字符   |                功能                |
| :-----: | :--------------------------------: |
|   `*`   |   匹配前面的字符或组合零次或多次   |
|   `+`   |   匹配前面的字符或组合一次或多次   |
|   `?`   |   匹配前面的字符或组合零次或一次   |
|  `{m}`  | 匹配前面的字符或组合恰好出现 m 次  |
| `{m,}`  | 匹配前面的字符或组合至少出现 m 次  |
| `{m,n}` | 匹配前面的字符或组合出现 m 到 n 次 |

例如，`*` 字符可以匹配前面的字符或组合出现零次或多次，如 `r"a*"` 可以匹配零个或多个 `a` 字符。`+` 字符可以匹配前面的字符或组合出现一次或多次，如 `r"a+"` 可以匹配至少一个 `a` 字符。`?` 字符可以匹配前面的字符或组合出现零次或一次，如 `r"a?"` 可以匹配零个或一个 `a` 字符。`{m}`、`{m,}` 和 `{m,n}` 则可以用来匹配特定数量的字符或组合。

另外需要注意的是，以上匹配多个字符的字符通常都是贪婪匹配，即会尽可能多地匹配字符。例如，对于字符串 `"aaaa"`，使用 `r"a*"` 进行匹配时会匹配整个字符串，而不是只匹配一个 `a`。如果想要进行非贪婪匹配，可以在这些字符后面添加一个 `?`，例如，`r"a*?"` 可以进行非贪婪匹配。

### 1.4 匹配开头结尾

| 字符 |                             功能                             |
| :--: | :----------------------------------------------------------: |
| `^`  |                       匹配字符串的开头                       |
| `$`  |                       匹配字符串的结尾                       |
| `\A` | 匹配字符串的开头（与 `^` 的区别在于，`\A` 不会匹配多行字符串的每一行的开头） |
| `\Z` | 匹配字符串的结尾（与 `$` 的区别在于，`\Z` 不会匹配多行字符串的每一行的结尾） |
| `\b` |           匹配单词边界，即单词与非单词字符的交界处           |
| `\B` |                        匹配非单词边界                        |

### 1.5 匹配分组

|    字符    |                            功能                            |
| :--------: | :--------------------------------------------------------: |
|     ()     |      匹配并捕获括号内的表达式，将匹配结果保存在分组中      |
|    (?:)    |         匹配但不捕获括号内的表达式，不保存匹配结果         |
| (?P<name>) | 匹配并捕获括号内的表达式，将匹配结果保存在指定名称的分组中 |
| (?P=name)  |           匹配与之前指定名称的分组匹配的相同文本           |
|    (?#)    |              注释，不影响正则表达式的匹配结果              |

其中，匹配并捕获括号内的表达式的语法为 `()`，例如 `(hello)` 会匹配并捕获字符串中的 `hello`，将其保存在分组中。可以通过数字来引用分组，例如 `\1` 引用第一个分组的匹配结果。如果需要匹配但不捕获括号内的表达式，则可以使用 `(?:)`，例如 `(?:hello)` 只会匹配 `hello`，但不会将其保存在分组中。

如果希望将匹配结果保存在指定名称的分组中，可以使用 `(?P<name>)` 的语法，例如 `(?P<name>hello)` 会将 `hello` 保存在名为 `name` 的分组中。可以通过 `(?P=name)` 来引用指定名称的分组匹配的相同文本。

最后，如果需要在正则表达式中添加注释，可以使用 `(?#)`，例如 `(?#This is a comment)hello` 不会匹配任何内容，但不会影响正则表达式的匹配结果。

### 1.6 贪婪与非贪婪匹配

在正则表达式中，贪婪匹配和非贪婪匹配是指匹配操作对待重复匹配符号（如星号和加号）的不同处理方式。

贪婪匹配指的是尽可能多地匹配字符串，也就是匹配到最后一个匹配符号为止。例如，对于正则表达式 `a.*b`，当匹配字符串 `aabab` 时，贪婪匹配会匹配整个字符串 `aabab`，而不是只匹配 `aab`。

非贪婪匹配（也称为懒惰匹配或最小匹配）指的是尽可能少地匹配字符串，也就是在第一个匹配符号处停止匹配。例如，对于正则表达式 `a.*?b`，当匹配字符串 `aabab` 时，非贪婪匹配会匹配 `aab`，而不是整个字符串 `aabab`。

在正则表达式中，可以通过在匹配符号后添加问号来实现非贪婪匹配，例如，`*?` 表示匹配零个或多个字符（非贪婪匹配），而 `*` 表示匹配零个或多个字符（贪婪匹配）。